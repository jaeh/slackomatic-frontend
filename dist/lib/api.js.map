{"version":3,"sources":["../../src/lib/api.js"],"names":[],"mappings":";;IAAkB,MAAM,WAAO,SAAS,EAAhC,MAAM;;IACN,GAAG,WAAO,MAAM,EAAhB,GAAG;;AAEX,IAAI,GAAG,GAAG,MAAM,EAAE;IACd,YAAY,GAAG,IAAI;IACnB,mBAAmB,GAAG,IAAI;IAC1B,GAAG,GAAG,OAAO,CAAC,GAAG;IACjB,OAAO,CACV;;AAED,SAAS,QAAQ,CAAC,GAAG,EAAE;AACrB,MAAK,YAAY,EAAG;AAClB,WAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;GAClB;CACF;;AAED,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,UAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAK;AAC/B,MAAI,GAAG,6BAA2B,GAAG,CAAC,WAAW,AAAE,CAAC;;AAEpD,MAAK,OAAO,KAAK,GAAG,EAAG;AACrB,WAAO,GAAG,GAAG,CAAC;;AAEd,YAAQ,mBAAiB,GAAG,CAAG,CAAC;AAChC,OAAG,CAAC,GAAG,EAAE,UAAC,MAAM,EAAK;;AAEnB,cAAQ,0BAAwB,MAAM,CAAC,UAAU,CAAG,CAAC;KACtD,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,UAAC,CAAC,EAAK;;AAEpB,cAAQ,CAAC,aAAa,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC;KACrC,CAAC,CAAC;GACJ;AACD,KAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;CAC3B,CAAC,CAAC;;iBAEY,GAAG","file":"src/lib/api.js","sourcesContent":["import {Router as router} from 'express';\nimport {get} from 'http';\n\nvar api = router()\n  , debugLogging = true\n  , lastRequestFinished = true\n  , log = console.log\n  , lastUrl\n;\n\nfunction debugLog(str) {\n  if ( debugLogging ) {\n    console.log(str);\n  }\n}\n\napi.use('*', (req, res, next) => {\n  var url = `http://127.0.0.1:8080${req.originalUrl}`;\n\n  if ( lastUrl !== url ) {\n    lastUrl = url;\n\n    debugLog(`loading url: ${url}`);\n    get(url, (result) => {\n      //do nothing on complete\n      debugLog(`slackomatic get res ${result.statusCode}`);\n    }).on('error', (e) => {\n      //do nothing on error\n      debugLog(\"Got error: \" + e.message);\n    });\n  }\n  res.status(200).send(url);\n});\n\nexport default api;\n"]}